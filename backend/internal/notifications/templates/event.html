{{template "base" .}}

{{define "content"}}
<h1 style="margin: 0 0 8px 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 22px; font-weight: 700; color: #18181b; line-height: 1.3;">
    [{{if index .Data "type_label"}}{{index .Data "type_label"}}{{else}}Ã‰vÃ©nement{{end}}] {{if index .Data "entity"}}{{index .Data "entity"}}{{end}}
</h1>

{{if index .Data "status"}}
<p style="margin: 0 0 20px 0;">
    <span style="display: inline-block; padding: 4px 12px; border-radius: 20px; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 12px; font-weight: 600; 
        {{if eq (index .Data "status") "OK"}}background-color: #dcfce7; color: #166534;{{else if eq (index .Data "status") "running"}}background-color: #dbeafe; color: #1e40af;{{else}}background-color: #fef2f2; color: #dc2626;{{end}}">
        {{if eq (index .Data "status") "OK"}}âœ“ SuccÃ¨s{{else if eq (index .Data "status") "running"}}âŸ³ En cours{{else}}âœ— {{index .Data "status"}}{{end}}
    </span>
</p>
{{end}}

<!-- Message principal -->
<p style="margin: 0 0 25px 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 15px; color: #3f3f46; line-height: 1.6;">
    {{.Message}}
</p>

<!-- DÃ©tails de l'Ã©vÃ©nement -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: #f8fafc; border-radius: 12px; overflow: hidden;">
    <tr>
        <td style="padding: 20px;">
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <!-- Ligne 1: Node et Type -->
                <tr>
                    <td width="50%" style="padding: 0 10px 15px 0; vertical-align: top;">
                        <p style="margin: 0 0 4px 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 11px; font-weight: 600; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">
                            NÅ“ud
                        </p>
                        <p style="margin: 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 15px; font-weight: 600; color: #0f172a;">
                            ğŸ–¥ï¸ {{if index .Data "node"}}{{index .Data "node"}}{{else}}â€”{{end}}
                        </p>
                    </td>
                    <td width="50%" style="padding: 0 0 15px 10px; vertical-align: top;">
                        <p style="margin: 0 0 4px 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 11px; font-weight: 600; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">
                            Type d'opÃ©ration
                        </p>
                        <p style="margin: 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 15px; font-weight: 600; color: #0f172a;">
                            {{if index .Data "type_label"}}{{index .Data "type_label"}}{{else if index .Data "type"}}{{index .Data "type"}}{{else}}â€”{{end}}
                        </p>
                    </td>
                </tr>
                
                <!-- Ligne 2: Utilisateur et Connexion -->
                <tr>
                    <td width="50%" style="padding: 0 10px 15px 0; vertical-align: top;">
                        <p style="margin: 0 0 4px 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 11px; font-weight: 600; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">
                            Utilisateur
                        </p>
                        <p style="margin: 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 14px; color: #334155;">
                            ğŸ‘¤ {{if index .Data "user"}}{{index .Data "user"}}{{else}}â€”{{end}}
                        </p>
                    </td>
                    <td width="50%" style="padding: 0 0 15px 10px; vertical-align: top;">
                        <p style="margin: 0 0 4px 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 11px; font-weight: 600; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">
                            Cluster
                        </p>
                        <p style="margin: 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 14px; color: #334155;">
                            ğŸŒ {{if index .Data "connection_name"}}{{index .Data "connection_name"}}{{else if index .Data "connection_id"}}{{index .Data "connection_id"}}{{else}}â€”{{end}}
                        </p>
                    </td>
                </tr>

                <!-- Ligne 3: EntitÃ©/VM -->
                {{if index .Data "entity"}}
                <tr>
                    <td colspan="2" style="padding: 0 0 0 0; vertical-align: top;">
                        <p style="margin: 0 0 4px 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 11px; font-weight: 600; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">
                            Ressource concernÃ©e
                        </p>
                        <p style="margin: 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 15px; font-weight: 600; color: #0f172a;">
                            ğŸ“¦ {{index .Data "entity"}}
                        </p>
                    </td>
                </tr>
                {{end}}
            </table>
        </td>
    </tr>
</table>

<!-- RÃ¨gle dÃ©clenchÃ©e -->
{{if index .Data "rule_name"}}
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin-top: 20px;">
    <tr>
        <td style="padding: 12px 16px; background-color: #f0f9ff; border-radius: 8px; border-left: 3px solid #0ea5e9;">
            <p style="margin: 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 13px; color: #0369a1;">
                <strong>ğŸ”” RÃ¨gle dÃ©clenchÃ©e:</strong> {{index .Data "rule_name"}}
            </p>
        </td>
    </tr>
</table>
{{end}}

<!-- UPID (ID technique) -->
{{if index .Data "upid"}}
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin-top: 15px;">
    <tr>
        <td style="padding: 10px 12px; background-color: #fafafa; border-radius: 6px;">
            <p style="margin: 0; font-family: 'Courier New', monospace; font-size: 11px; color: #71717a; word-break: break-all;">
                ID: {{index .Data "upid"}}
            </p>
        </td>
    </tr>
</table>
{{end}}
{{end}}
