{{template "base" .}}

{{define "content"}}
<h1 style="margin: 0 0 10px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 24px; font-weight: 700; color: #18181b; line-height: 1.3;">
    {{.Title}}
</h1>

<p style="margin: 0 0 25px 0;">
    <span style="display: inline-block; padding: 4px 12px; background-color: {{.BgColor}}; color: {{.AccentColor}}; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 12px; font-weight: 600; border-radius: 12px; text-transform: uppercase;">
        {{if index .Data "period"}}Rapport {{index .Data "period"}}{{else}}Rapport{{end}}
    </span>
</p>

<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin-bottom: 25px;">
    <tr>
        <td width="25%" style="padding-right: 6px;">
            <table border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: #f4f4f5; border-radius: 8px;">
                <tr>
                    <td align="center" style="padding: 15px 10px;">
                        <p style="margin: 0 0 5px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 24px; font-weight: 700; color: #18181b;">{{if index .Data "total_vms"}}{{index .Data "total_vms"}}{{else}}0{{end}}</p>
                        <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 10px; color: #71717a; text-transform: uppercase;">VMs</p>
                    </td>
                </tr>
            </table>
        </td>
        <td width="25%" style="padding: 0 3px;">
            <table border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: #f4f4f5; border-radius: 8px;">
                <tr>
                    <td align="center" style="padding: 15px 10px;">
                        <p style="margin: 0 0 5px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 24px; font-weight: 700; color: #18181b;">{{if index .Data "total_nodes"}}{{index .Data "total_nodes"}}{{else}}0{{end}}</p>
                        <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 10px; color: #71717a; text-transform: uppercase;">Noeuds</p>
                    </td>
                </tr>
            </table>
        </td>
        <td width="25%" style="padding: 0 3px;">
            <table border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: #ecfdf5; border-radius: 8px;">
                <tr>
                    <td align="center" style="padding: 15px 10px;">
                        <p style="margin: 0 0 5px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 24px; font-weight: 700; color: #10b981;">{{if index .Data "backups"}}{{index .Data "backups"}}{{else}}0{{end}}</p>
                        <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 10px; color: #059669; text-transform: uppercase;">Backups</p>
                    </td>
                </tr>
            </table>
        </td>
        <td width="25%" style="padding-left: 6px;">
            <table border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: #fef3c7; border-radius: 8px;">
                <tr>
                    <td align="center" style="padding: 15px 10px;">
                        <p style="margin: 0 0 5px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 24px; font-weight: 700; color: #d97706;">{{if index .Data "alerts"}}{{index .Data "alerts"}}{{else}}0{{end}}</p>
                        <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 10px; color: #b45309; text-transform: uppercase;">Alertes</p>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<table border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: #fafafa; border-radius: 8px; margin-bottom: 20px;">
    <tr>
        <td style="padding: 20px;">
            <h3 style="margin: 0 0 15px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 13px; font-weight: 600; color: #52525b; text-transform: uppercase;">Utilisation moyenne</h3>
            
            <table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin-bottom: 12px;">
                <tr>
                    <td style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 13px; color: #71717a; width: 80px;">CPU</td>
                    <td style="padding: 0 10px;">
                        <div style="background-color: #e4e4e7; border-radius: 4px; height: 8px; width: 100%;"></div>
                    </td>
                    <td style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 13px; color: #18181b; font-weight: 600; width: 50px; text-align: right;">{{if index .Data "avg_cpu"}}{{printf "%.1f" (index .Data "avg_cpu")}}%{{else}}0%{{end}}</td>
                </tr>
            </table>
            
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tr>
                    <td style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 13px; color: #71717a; width: 80px;">Memoire</td>
                    <td style="padding: 0 10px;">
                        <div style="background-color: #e4e4e7; border-radius: 4px; height: 8px; width: 100%;"></div>
                    </td>
                    <td style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 13px; color: #18181b; font-weight: 600; width: 50px; text-align: right;">{{if index .Data "avg_memory"}}{{printf "%.1f" (index .Data "avg_memory")}}%{{else}}0%{{end}}</td>
                </tr>
            </table>
        </td>
    </tr>
</table>

{{if index .Data "migrations"}}
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin-bottom: 20px;">
    <tr>
        <td style="padding: 15px; background-color: #eff6ff; border-radius: 8px; border-left: 3px solid #3b82f6;">
            <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 14px; color: #1e40af;">
                ðŸ”„ <strong>{{index .Data "migrations"}} migrations</strong> ont ete effectuees durant cette periode.
            </p>
        </td>
    </tr>
</table>
{{end}}

<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td style="padding-top: 15px; border-top: 1px solid #e4e4e7;">
            <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 12px; color: #a1a1aa; text-align: center;">
                Ce rapport a ete genere automatiquement par ProxCenter
            </p>
        </td>
    </tr>
</table>
{{end}}
