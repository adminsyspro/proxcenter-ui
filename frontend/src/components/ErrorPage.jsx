'use client'

import Link from 'next/link'
import { Box, Button, Typography, useTheme, alpha } from '@mui/material'
import { useTranslations } from 'next-intl'

// Logo SVG ProxCenter
const LogoIcon = ({ size = 60, accentColor = '#F29221' }) => {
  const height = (size * 170) / 220

  return (
    <svg
      width={size}
      height={height}
      viewBox="0 0 220 170"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M 174.30 158.91 C160.99,140.34 155.81,133.18 151.52,127.42 C149.04,124.08 147.00,120.78 147.00,120.10 C147.00,119.42 148.91,116.47 151.25,113.55 C153.59,110.63 157.44,105.71 159.81,102.62 C162.18,99.53 164.71,97.00 165.44,97.00 C166.58,97.00 182.93,119.09 200.79,144.77 C203.71,148.95 208.32,155.38 211.04,159.06 C213.77,162.74 216.00,166.03 216.00,166.37 C216.00,166.72 207.92,167.00 198.05,167.00 L 180.10 167.00 Z M 164.11 69.62 C161.87,67.24 159.22,63.61 151.44,52.29 L 147.85 47.07 L 153.79 39.29 C157.05,35.00 161.25,29.62 163.11,27.32 C164.98,25.02 169.65,19.08 173.50,14.11 L 180.50 5.08 L 199.25 5.04 C209.56,5.02 218.00,5.23 218.00,5.51 C218.00,5.79 214.51,10.42 210.25,15.81 C205.99,21.19 199.80,29.11 196.50,33.41 C193.20,37.71 189.15,42.92 187.50,44.98 C183.18,50.39 169.32,68.18 167.76,70.30 C166.52,72.01 166.33,71.98 164.11,69.62 Z"
        fill={accentColor}
      />
      <path
        d="M 0.03 164.75 C0.05,162.18 2.00,159.04 9.28,149.83 C19.92,136.37 45.56,103.43 54.84,91.32 L 61.17 83.05 L 58.87 79.77 C49.32,66.18 11.10,12.77 8.83,9.86 C7.28,7.85 6.00,5.94 6.00,5.61 C6.00,5.27 14.21,5.01 24.25,5.03 L 42.50 5.06 L 53.50 20.63 C59.55,29.20 65.44,37.40 66.58,38.85 C72.16,45.97 97.33,81.69 97.70,83.02 C98.13,84.59 95.40,88.27 63.50,129.06 C53.05,142.42 42.77,155.64 40.66,158.43 C32.84,168.76 34.77,168.00 16.33,168.00 L 0.00 168.00 L 0.03 164.75 Z M 55.56 167.09 C55.25,166.59 56.95,163.78 59.33,160.84 C61.71,157.90 66.10,152.33 69.08,148.46 C72.06,144.59 81.47,132.50 90.00,121.60 C98.53,110.69 106.38,100.58 107.46,99.13 C108.54,97.69 111.81,93.49 114.72,89.80 L 120.00 83.10 L 115.25 76.47 C112.64,72.82 109.82,68.83 109.00,67.61 C108.18,66.38 105.73,62.93 103.57,59.94 C101.41,56.95 96.88,50.67 93.51,46.00 C77.15,23.36 65.00,6.12 65.00,5.57 C65.00,5.23 73.21,5.08 83.24,5.23 L 101.49 5.50 L 124.77 38.00 C137.58,55.88 150.09,73.37 152.58,76.88 C155.08,80.39 156.91,83.79 156.66,84.44 C156.41,85.09 153.55,88.97 150.30,93.06 C147.06,97.15 137.93,108.82 130.02,119.00 C122.12,129.18 110.29,144.36 103.75,152.75 L 91.85 168.00 L 73.98 168.00 C64.16,168.00 55.87,167.59 55.56,167.09 Z"
        fill="#FCFCFC"
      />
    </svg>
  )
}

const errorIcons = {
  404: 'ri-file-unknow-line',
  500: 'ri-server-line',
  403: 'ri-lock-line',
  401: 'ri-user-unfollow-line',
  503: 'ri-tools-line',
}

export default function ErrorPage({
  code = 404,
  title,
  description,
  showHomeButton = true,
  showRetryButton = false,
  onRetry,
}) {
  const theme = useTheme()
  const t = useTranslations('errorPages')
  const icon = errorIcons[code] || errorIcons[404]
  const codeStr = String(code)

  const displayTitle = title || t(`${codeStr}.title`)
  const displayDescription = description || t(`${codeStr}.description`)

  return (
    <Box
      sx={{
        minHeight: '100vh',
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        justifyContent: 'center',
        bgcolor: 'background.default',
        p: 3,
        textAlign: 'center',
      }}
    >
      {/* Logo */}
      <Box sx={{ mb: 4 }}>
        <LogoIcon size={80} accentColor={theme.palette.primary.main} />
      </Box>

      {/* Code d'erreur */}
      <Typography
        variant="h1"
        sx={{
          fontSize: { xs: '6rem', sm: '8rem', md: '10rem' },
          fontWeight: 800,
          lineHeight: 1,
          background: `linear-gradient(135deg, ${theme.palette.primary.main} 0%, ${theme.palette.primary.dark} 100%)`,
          backgroundClip: 'text',
          WebkitBackgroundClip: 'text',
          WebkitTextFillColor: 'transparent',
          mb: 2,
        }}
      >
        {code}
      </Typography>

      {/* Icône */}
      <Box
        sx={{
          width: 80,
          height: 80,
          borderRadius: '50%',
          bgcolor: alpha(theme.palette.primary.main, 0.1),
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          mb: 3,
        }}
      >
        <i
          className={icon}
          style={{
            fontSize: 40,
            color: theme.palette.primary.main,
          }}
        />
      </Box>

      {/* Titre */}
      <Typography
        variant="h4"
        sx={{
          fontWeight: 700,
          mb: 1.5,
          color: 'text.primary',
        }}
      >
        {displayTitle}
      </Typography>

      {/* Description */}
      <Typography
        variant="body1"
        sx={{
          color: 'text.secondary',
          maxWidth: 480,
          mb: 4,
          lineHeight: 1.6,
        }}
      >
        {displayDescription}
      </Typography>

      {/* Boutons */}
      <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap', justifyContent: 'center' }}>
        {showHomeButton && (
          <Button
            component={Link}
            href="/home"
            variant="contained"
            size="large"
            startIcon={<i className="ri-home-4-line" />}
            sx={{
              px: 4,
              py: 1.5,
              borderRadius: 2,
              textTransform: 'none',
              fontWeight: 600,
            }}
          >
            {t('backToHome')}
          </Button>
        )}
        {showRetryButton && onRetry && (
          <Button
            onClick={onRetry}
            variant="outlined"
            size="large"
            startIcon={<i className="ri-refresh-line" />}
            sx={{
              px: 4,
              py: 1.5,
              borderRadius: 2,
              textTransform: 'none',
              fontWeight: 600,
            }}
          >
            {t('retry')}
          </Button>
        )}
      </Box>

      {/* Footer */}
      <Typography
        variant="caption"
        sx={{
          position: 'absolute',
          bottom: 24,
          color: 'text.disabled',
        }}
      >
        ProxCenter — Proxmox Management Platform
      </Typography>
    </Box>
  )
}
